# Остаточные параметры и оператор расширения

#### [Остаточные параметры и оператор расширения](https://learn.javascript.ru/rest-parameters-spread-operator)

### Остаточные параметры (...)

Вызывать функцию можно с любым количеством аргументов независимо от того, как она была определена.

    function sum(a, b) {
        return a + b;
    }
    
    alert( sum(1, 2, 3, 4, 5) );

Лишние аргументы не вызовут ошибку. Но, конечно, посчитаются только первые два.

Остаточные параметры могут быть обозначены через три точки `...`. Буквально это значит: «собери оставшиеся параметры и
положи их в массив».

Например, соберём все аргументы в массив `args`:

    function sumAll(...args) { // args — имя массива
        let sum = 0;
        
        for (let arg of args) sum += arg;
        
        return sum;
    }
    
    alert( sumAll(1) ); // 1
    alert( sumAll(1, 2) ); // 3
    alert( sumAll(1, 2, 3) ); // 6

**Остаточные параметры должны располагаться в конце**

### Переменная "arguments"

Все аргументы функции находятся в псевдомассиве `arguments` под своими порядковыми номерами.

    function showName() {
        alert( arguments.length );
        alert( arguments[0] );
        alert( arguments[1] );
        
        // Объект arguments можно перебирать
        // for (let arg of arguments) alert(arg);
    }
    
    // Вывод: 2, Юлий, Цезарь
    showName("Юлий", "Цезарь");
    
    // Вывод: 1, Илья, undefined (второго аргумента нет)
    showName("Илья");

Но у него есть один недостаток. Хотя `arguments` похож на массив, и его тоже можно перебирать, это всё же не массив. Он
не поддерживает методы массивов, поэтому мы не можем, например, вызвать `arguments.map(...)`.

К тому же, `arguments` всегда содержит все аргументы функции — мы не можем получить их часть. А остаточные параметры
позволяют это сделать.

Соответственно, для более удобной работы с аргументами лучше использовать остаточные параметры.

**Стрелочные функции не имеют "arguments"**

### Оператор расширения

Мы узнали, как получить массив из списка параметров.

Но иногда нужно сделать в точности противоположное.

И тут нам поможет оператор расширения. Он похож на остаточные параметры – тоже использует `...`, но делает совершенно
противоположное.

Когда .`..arr` используется при вызове функции, он «расширяет» перебираемый объект `arr` в список аргументов.

Этим же способом мы можем передать несколько итерируемых объектов:

    let arr1 = [1, -2, 3, 4];
    let arr2 = [8, 3, -8, 1];
    
    alert( Math.max(...arr1, ...arr2) ); // 8

Мы даже можем комбинировать оператор расширения с обычными значениями:

    let arr1 = [1, -2, 3, 4];
    let arr2 = [8, 3, -8, 1];
    
    alert( Math.max(1, ...arr1, 2, ...arr2, 25) ); // 25

Оператор расширения можно использовать и для слияния массивов:

    let arr = [3, 5, 1];
    let arr2 = [8, 9, 15];
    
    let merged = [0, ...arr, 2, ...arr2];
    
    alert(merged); // 0,3,5,1,2,8,9,15 (0, затем arr, затем 2, в конце arr2)

Например, оператор расширения подойдёт для того, чтобы превратить строку в массив символов:

    let str = "Привет";
    
    alert( [...str] ); // П,р,и,в,е,т

Под капотом оператор расширения использует итераторы, чтобы перебирать элементы. Так же, как это делает `for..of`.

Для этой задачи мы можем использовать и `Array.from`. Он тоже преобразует перебираемый объект (такой как строка) в
массив:

    let str = "Привет";
    
    // Array.from преобразует перебираемый объект в массив
    alert( Array.from(str) ); // П,р,и,в,е,т

Результат аналогичен `[...str]`.

Но между `Array.from(obj)` и `[...obj]` есть разница:

- `Array.from` работает как с псевдомассивами, так и с итерируемыми объектами
- Оператор расширения работает только с итерируемыми объектами

Выходит, что если нужно сделать из чего угодно массив, то `Array.from` — более универсальный метод.

### Итого

Когда мы видим `...` в коде, это могут быть как остаточные параметры, так и оператор расширения.

Как отличить их друг от друга:

- Если `...` располагается в конце списка аргументов функции, то это «остаточные параметры». Он собирает остальные
  неуказанные аргументы и делает из них массив.
- Если `...` встретился в вызове функции или где-либо ещё, то это «оператор расширения». Он извлекает элементы из
  массива.

Полезно запомнить:

- Остаточные параметры используются, чтобы создавать новые функции с неопределённым числом аргументов.
- С помощью оператора расширения можно вставить массив в функцию, которая по умолчанию работает с обычным списком
  аргументов.

Вместе эти конструкции помогают легко преобразовывать наборы значений в массивы и обратно.

К аргументам функции можно обращаться и по-старому — через псевдомассив `arguments`.